{"version":3,"sources":["component/common/input.jsx","component/common/select.jsx","component/common/form.jsx","service/logService.js","service/httpService.js","service/aqiService.js","component/result.jsx","component/locationForm.jsx","App.js","index.js"],"names":["Input","name","label","error","rest","className","htmlFor","id","Select","options","value","map","option","_id","Form","state","data","errors","validate","Joi","schema","abortEarly","details","item","path","message","validateProperty","obj","handleSubmit","e","preventDefault","setState","doSubmit","handleChange","input","currentTarget","errorMessage","console","log","disabled","this","onChange","type","Component","init","axios","interceptors","response","use","status","logger","toast","Promise","reject","get","post","put","delete","apiEndPoint","apiUrl","apiKey","getNearestCity","http","getCity","cityObj","city","Result","props","aqi","country","aqius","current","pollution","quality","condition","color","LocationForm","location","locations","string","handleNearestCity","a","result","loc","filter","m","onSubmit","renderSelect","renderButton","onClick","App","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9c70f70f.chunk.js","sourcesContent":["import React from 'react';\n\nconst Input = ({ name, label, error, ...rest }) => {\n\treturn (\n\t\t<div className='form-group'>\n\t\t\t<label htmlFor={name}>{label}</label>\n\t\t\t<input {...rest} name={name} id={name} className='form-control' />\n\t\t\t{error && <div className='alert alert-danger'>{error}</div>}\n\t\t</div>\n\t);\n};\n\nexport default Input;\n","import React from 'react';\n\nconst Select = ({ name, label, options, error, ...rest }) => {\n\treturn (\n\t\t<div className='form-group'>\n\t\t\t<label htmlFor={name}>\n\t\t\t\t<h4 className='selectLabel'>Select one of the {label} </h4>\n\t\t\t</label>\n\t\t\t<select name={name} id={name} {...rest} className='form-select'>\n\t\t\t\t<option value='' />\n\t\t\t\t{options.map((option) => (\n\t\t\t\t\t<option key={option._id} value={option._id}>\n\t\t\t\t\t\t{option.name}\n\t\t\t\t\t</option>\n\t\t\t\t))}\n\t\t\t</select>\n\t\t\t{error && <div className='alert alert-danger'>{error}</div>}\n\t\t</div>\n\t);\n};\n\nexport default Select;\n","import React, { Component } from 'react';\nimport Joi from 'joi-browser';\nimport Input from './input';\nimport Select from './select';\n\nclass Form extends Component {\n\tstate = {\n\t\tdata: {},\n\t\terrors: {},\n\t};\n\n\tvalidate = () => {\n\t\tconst options = { abortEarly: false };\n\t\tconst { error } = Joi.validate(this.state.data, this.schema, options);\n\t\tif (!error) return null;\n\n\t\tconst errors = {};\n\t\tfor (let item of error.details) errors[item.path[0]] = item.message;\n\t\treturn errors;\n\t};\n\n\tvalidateProperty = ({ name, value }) => {\n\t\tconst obj = { [name]: value };\n\t\tconst schema = { [name]: this.schema[name] };\n\t\tconst { error } = Joi.validate(obj, schema);\n\t\treturn error ? error.details[0].message : null;\n\t};\n\n\thandleSubmit = (e) => {\n\t\te.preventDefault();\n\n\t\tconst errors = this.validate();\n\t\tthis.setState({ errors: errors || {} });\n\t\tif (errors) return;\n\n\t\tthis.doSubmit();\n\t};\n\n\thandleChange = ({ currentTarget: input }) => {\n\t\tconst errors = { ...this.state.errors };\n\t\tconst errorMessage = this.validateProperty(input);\n\t\tif (errorMessage) errors[input.name] = errorMessage;\n\t\telse delete errors[input.name];\n\n\t\tconst data = { ...this.state.data };\n\t\tdata[input.name] = input.value;\n\n\t\tthis.setState({ data, errors });\n\t\tconsole.log(this.state.data);\n\t};\n\n\trenderButton(label) {\n\t\treturn (\n\t\t\t<button disabled={this.validate()} className='btn btn-primary'>\n\t\t\t\t{label}\n\t\t\t</button>\n\t\t);\n\t}\n\n\trenderSelect(name, label, options) {\n\t\tconst { data, errors } = this.state;\n\n\t\treturn (\n\t\t\t<Select\n\t\t\t\tname={name}\n\t\t\t\tvalue={data[name]}\n\t\t\t\tlabel={label}\n\t\t\t\toptions={options}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t\terror={errors[name]}\n\t\t\t/>\n\t\t);\n\t}\n\n\trenderInput(name, label, type = 'text') {\n\t\tconst { data, errors } = this.state;\n\n\t\treturn (\n\t\t\t<Input\n\t\t\t\ttype={type}\n\t\t\t\tname={name}\n\t\t\t\tvalue={data[name]}\n\t\t\t\tlabel={label}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t\terror={errors[name]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default Form;\n","function init() {}\n\nfunction log(error) {\n\tconsole.error(error);\n}\n\nexport default {\n\tinit,\n\tlog,\n};\n","import axios from 'axios';\nimport logger from './logService';\nimport { toast } from 'react-toastify';\n\naxios.interceptors.response.use(null, (error) => {\n\tconst expectedError = error.response && error.response.status >= 400 && error.response.status < 500;\n\n\tif (!expectedError) {\n\t\tlogger.log(error);\n\t\ttoast.error('An unexpected error occurrred.');\n\t}\n\n\treturn Promise.reject(error);\n});\n\nexport default {\n\tget: axios.get,\n\tpost: axios.post,\n\tput: axios.put,\n\tdelete: axios.delete,\n};\n","import http from './httpService';\nimport { apiUrl, apiKey } from '../config.json';\n\nconst apiEndPoint = apiUrl + 'nearest_city?key=' + apiKey;\n\nexport function getNearestCity() {\n\treturn http.get(apiEndPoint);\n}\n\nexport function getCity(cityObj) {\n\tconst { name: city, state } = cityObj;\n\treturn http.get(apiUrl + `city?city=${city}&state=${state}&country=Nepal&key=` + apiKey);\n}\n\nexport function getRanking() {\n\treturn http.get(apiUrl + 'city_ranking?key=' + apiKey);\n}\n","import React from 'react';\n\nfunction evalAQI(aqi) {\n\tif (aqi >= 0 && aqi <= 50) return { condition: 'Good', color: 'Green' };\n\telse if (aqi >= 51 && aqi <= 100) return { condition: 'Moderate', color: 'Yellow' };\n\telse if (aqi >= 101 && aqi <= 150) return { condition: 'Unhealthy for Sensitive Groups', color: 'Orange' };\n\telse if (aqi >= 151 && aqi <= 200) return { condition: 'Unhealthy', color: 'Red' };\n\telse if (aqi >= 201 && aqi <= 300) return { condition: 'Very Unhealthy', color: 'Purple' };\n\telse if (aqi >= 301 && aqi <= 500) return { condition: 'Hazardous', color: 'Maroon' };\n\n\treturn null;\n}\nconst Result = (props) => {\n\tconst { value } = props;\n\n\tif (value) {\n\t\tconst { city, state, country } = value;\n\t\tconst { aqius } = value.current.pollution;\n\t\tconst quality = evalAQI(aqius);\n\t\treturn (\n\t\t\t<div className='card text-center w-60'>\n\t\t\t\t<div className='card-header'>\n\t\t\t\t\t{city}, {state}, {country}\n\t\t\t\t</div>\n\t\t\t\t<div className='card-body'>\n\t\t\t\t\t<h5 className='card-title'>AQI: {aqius} US AQI</h5>\n\t\t\t\t\t<p className='card-text'>Air Quality: {quality.condition}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\treturn null;\n};\n\nexport default Result;\n","import React from 'react';\nimport Form from './common/form';\nimport Joi from 'joi-browser';\nimport { getCity, getNearestCity } from '../service/aqiService';\nimport Result from './result';\nclass LocationForm extends Form {\n\tstate = {\n\t\tdata: { location: '' },\n\t\tlocations: [\n\t\t\t{ _id: '1', name: 'Bhaktapur', state: 'Central Region' },\n\t\t\t{ _id: '2', name: 'Bharatpur', state: 'Central Region' },\n\t\t\t{ _id: '3', name: 'Dhulikhel', state: 'Central Region' },\n\t\t\t{ _id: '4', name: 'Kathmandu', state: 'Central Region' },\n\t\t\t{ _id: '5', name: 'Kirtipur', state: 'Central Region' },\n\t\t\t{ _id: '6', name: 'Patan', state: 'Central Region' },\n\t\t\t{ _id: '7', name: 'Dhankuta', state: 'Eastern Region' },\n\t\t\t{ _id: '8', name: 'Nepalgunj', state: 'Mid Western' },\n\t\t\t{ _id: '9', name: 'Tulsipur', state: 'Mid Western' },\n\t\t\t{ _id: '10', name: 'Pokhara', state: 'Western Region' },\n\t\t],\n\n\t\terrors: {},\n\t};\n\n\tschema = {\n\t\tlocation: Joi.string().label('Location'),\n\t};\n\thandleNearestCity = async () => {\n\t\tconst result = await getNearestCity();\n\t\tthis.setState({ result: result.data.data });\n\t};\n\tdoSubmit = async () => {\n\t\t// Call the server\n\t\tconst { locations, data } = this.state;\n\t\tconst loc = locations.filter((m) => m._id === data.location);\n\n\t\tconst result = await getCity(loc[0]);\n\t\tthis.setState({ result: result.data.data });\n\t};\n\trender() {\n\t\tconst { result, locations } = this.state;\n\n\t\treturn (\n\t\t\t<div className='container-fluid'>\n\t\t\t\t<h1 className='head'>Check Your Air Quality</h1>\n\t\t\t\t<h1 className='head_2'>------------------X-------------------</h1>\n\n\t\t\t\t<div className='row'>\n\t\t\t\t\t<div className='col-md-auto'>\n\t\t\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t\t{/* {this.renderInput('location', 'Location')} */}\n\t\t\t\t\t\t\t{this.renderSelect('location', 'Location', locations)}\n\t\t\t\t\t\t\t{this.renderButton('Check')}\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='col-md-auto'>\n\t\t\t\t\t\t<button type='button' className='btn btn-danger' onClick={this.handleNearestCity}>\n\t\t\t\t\t\t\tCheck for nearest city\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Result value={result} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default LocationForm;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport LocationForm from './component/locationForm';\n\nimport './App.css';\nfunction App() {\n\treturn (\n\t\t<Switch>\n\t\t\t<Route path='/check_your_air' component={LocationForm} />\n\t\t\t{/* <Redirect from='/' to='/check_your_air' />  */}\n\t\t</Switch>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<BrowserRouter>\n\t\t<App />\n\t</BrowserRouter>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}