{"version":3,"sources":["component/common/input.jsx","component/common/select.jsx","component/common/form.jsx","service/logService.js","service/httpService.js","service/aqiService.js","component/result.jsx","component/locationForm.jsx","App.js","index.js"],"names":["Input","name","label","error","rest","className","htmlFor","id","Select","options","value","map","option","_id","Form","state","data","errors","validate","Joi","schema","abortEarly","details","item","path","message","validateProperty","obj","handleSubmit","e","preventDefault","setState","doSubmit","handleChange","input","currentTarget","errorMessage","disabled","this","onChange","type","Component","init","log","console","axios","interceptors","response","use","status","logger","toast","Promise","reject","get","post","put","delete","apiEndPoint","apiUrl","apiKey","getCity","http","Result","props","aqi","city","country","aqius","current","pollution","quality","condition","color","LocationForm","location","string","required","a","result","onSubmit","renderInput","renderButton","App","Fragment","component","ReactDOM","render","document","getElementById"],"mappings":"4cAYeA,EAVD,SAAC,GAAqC,IAAnCC,EAAkC,EAAlCA,KAAMC,EAA4B,EAA5BA,MAAOC,EAAqB,EAArBA,MAAUC,EAAW,wCAClD,OACC,sBAAKC,UAAU,aAAf,UACC,uBAAOC,QAASL,EAAhB,SAAuBC,IACvB,iDAAWE,GAAX,IAAiBH,KAAMA,EAAMM,GAAIN,EAAMI,UAAU,kBAChDF,GAAS,qBAAKE,UAAU,qBAAf,SAAqCF,QCYnCK,EAjBA,SAAC,GAA8C,IAA5CP,EAA2C,EAA3CA,KAAMC,EAAqC,EAArCA,MAAOO,EAA8B,EAA9BA,QAASN,EAAqB,EAArBA,MAAUC,EAAW,kDAC5D,OACC,sBAAKC,UAAU,aAAf,UACC,uBAAOC,QAASL,EAAhB,SAAuBC,IACvB,iDAAQD,KAAMA,EAAMM,GAAIN,GAAUG,GAAlC,IAAwCC,UAAU,eAAlD,UACC,wBAAQK,MAAM,KACbD,EAAQE,KAAI,SAACC,GAAD,OACZ,wBAAyBF,MAAOE,EAAOC,IAAvC,SACED,EAAOX,MADIW,EAAOC,YAKrBV,GAAS,qBAAKE,UAAU,qBAAf,SAAqCF,QC2EnCW,E,4MAnFdC,MAAQ,CACPC,KAAM,GACNC,OAAQ,I,EAGTC,SAAW,WACV,IACQf,EAAUgB,IAAID,SAAS,EAAKH,MAAMC,KAAM,EAAKI,OADrC,CAAEC,YAAY,IACtBlB,MACR,IAAKA,EAAO,OAAO,KAEnB,IALgB,EAKVc,EAAS,GALC,cAMCd,EAAMmB,SANP,IAMhB,gCAASC,EAAT,QAAgCN,EAAOM,EAAKC,KAAK,IAAMD,EAAKE,SAN5C,8BAOhB,OAAOR,G,EAGRS,iBAAmB,YAAsB,IAAnBzB,EAAkB,EAAlBA,KAAMS,EAAY,EAAZA,MACrBiB,EAAG,eAAM1B,EAAOS,GAChBU,EAAM,eAAMnB,EAAO,EAAKmB,OAAOnB,IAC7BE,EAAUgB,IAAID,SAASS,EAAKP,GAA5BjB,MACR,OAAOA,EAAQA,EAAMmB,QAAQ,GAAGG,QAAU,M,EAG3CG,aAAe,SAACC,GACfA,EAAEC,iBAEF,IAAMb,EAAS,EAAKC,WACpB,EAAKa,SAAS,CAAEd,OAAQA,GAAU,KAC9BA,GAEJ,EAAKe,Y,EAGNC,aAAe,YAA+B,IAAbC,EAAY,EAA3BC,cACXlB,EAAM,eAAQ,EAAKF,MAAME,QACzBmB,EAAe,EAAKV,iBAAiBQ,GACvCE,EAAcnB,EAAOiB,EAAMjC,MAAQmC,SAC3BnB,EAAOiB,EAAMjC,MAEzB,IAAMe,EAAI,eAAQ,EAAKD,MAAMC,MAC7BA,EAAKkB,EAAMjC,MAAQiC,EAAMxB,MAEzB,EAAKqB,SAAS,CAAEf,OAAMC,Y,2DAGVf,GACZ,OACC,wBAAQmC,SAAUC,KAAKpB,WAAYb,UAAU,kBAA7C,SACEH,M,mCAKSD,EAAMC,EAAOO,GAAU,IAAD,EACT6B,KAAKvB,MAAtBC,EAD0B,EAC1BA,KAAMC,EADoB,EACpBA,OAEd,OACC,cAAC,EAAD,CACChB,KAAMA,EACNS,MAAOM,EAAKf,GACZC,MAAOA,EACPO,QAASA,EACT8B,SAAUD,KAAKL,aACf9B,MAAOc,EAAOhB,O,kCAKLA,EAAMC,GAAuB,IAAhBsC,EAAe,uDAAR,OAAQ,EACdF,KAAKvB,MAAtBC,EAD+B,EAC/BA,KAAMC,EADyB,EACzBA,OAEd,OACC,cAAC,EAAD,CACCuB,KAAMA,EACNvC,KAAMA,EACNS,MAAOM,EAAKf,GACZC,MAAOA,EACPqC,SAAUD,KAAKL,aACf9B,MAAOc,EAAOhB,S,GA9ECwC,a,iBCKJ,OACdC,KAPD,aAQCC,IAND,SAAaxC,GACZyC,QAAQzC,MAAMA,K,QCHf0C,IAAMC,aAAaC,SAASC,IAAI,MAAM,SAAC7C,GAQtC,OAPsBA,EAAM4C,UAAY5C,EAAM4C,SAASE,QAAU,KAAO9C,EAAM4C,SAASE,OAAS,MAG/FC,EAAOP,IAAIxC,GACXgD,IAAMhD,MAAM,mCAGNiD,QAAQC,OAAOlD,MAGR,OACdmD,IAAKT,IAAMS,IACXC,KAAMV,IAAMU,KACZC,IAAKX,IAAMW,IACXC,OAAQZ,IAAMY,Q,QChBTC,EAAcC,IAAS,oBAAsBC,IAE5C,SAASC,IACf,OAAOC,EAAKR,IAAII,GCMjB,IAsBeK,EAtBA,SAACC,GAAW,IAVVC,EAWRvD,EAAUsD,EAAVtD,MAER,GADAkC,QAAQD,IAAIjC,GACRA,EAAO,CAAC,IACHwD,EAAyBxD,EAAzBwD,KAAMnD,EAAmBL,EAAnBK,MAAOoD,EAAYzD,EAAZyD,QACbC,EAAU1D,EAAM2D,QAAQC,UAAxBF,MACFG,GAhBSN,EAgBSG,IAfd,GAAKH,GAAO,GAAW,CAAEO,UAAW,OAAQC,MAAO,SAOvD,QASN,OACC,sBAAKpE,UAAU,wBAAf,UACC,sBAAKA,UAAU,cAAf,UACE6D,EADF,KACUnD,EADV,KACmBoD,KAEnB,sBAAK9D,UAAU,YAAf,UACC,qBAAIA,UAAU,aAAd,kBAAiC+D,EAAjC,aACA,oBAAG/D,UAAU,YAAb,0BAAuCkE,EAAQC,mBAKnD,OAAO,MCMOE,E,4MA/Bd3D,MAAQ,CACPC,KAAM,CAAE2D,SAAU,IAClB1D,OAAQ,I,EAGTG,OAAS,CACRuD,SAAUxD,IAAIyD,SAASC,WAAW3E,MAAM,a,EAGzC8B,S,sBAAW,4BAAA8C,EAAA,sEAEWjB,IAFX,OAEJkB,EAFI,OAGV,EAAKhD,SAAS,CAAEgD,OAAQA,EAAO/D,KAAKA,OACpC4B,QAAQD,IAAI,YAAa,EAAK5B,MAAMC,KAAK2D,SAAU,EAAK5D,MAAMqD,MAAOW,EAAO/D,KAAKA,KAAK2B,KAJ5E,2C,uDAMD,IAAD,EACqBL,KAAKvB,MAA1BgE,EADA,EACAA,OADA,EACQJ,SAEhB,OADA/B,QAAQD,IAAIoC,GAEX,gCACC,oBAAI1E,UAAU,OAAd,oCACA,uBAAM2E,SAAU1C,KAAKV,aAArB,UACEU,KAAK2C,YAAY,WAAY,YAC7B3C,KAAK4C,aAAa,YAEpB,cAAC,EAAD,CAAQxE,MAAOqE,W,GA1BQjE,G,MCWZqE,MAXf,WACC,OACC,cAAC,IAAMC,SAAP,UACC,qBAAK/E,UAAU,YAAf,SACC,cAAC,IAAD,CAAOmB,KAAK,IAAI6D,UAAWX,SCF/BY,IAASC,OACR,cAAC,IAAD,UACC,cAAC,EAAD,MAEDC,SAASC,eAAe,W","file":"static/js/main.85a04383.chunk.js","sourcesContent":["import React from 'react';\n\nconst Input = ({ name, label, error, ...rest }) => {\n\treturn (\n\t\t<div className='form-group'>\n\t\t\t<label htmlFor={name}>{label}</label>\n\t\t\t<input {...rest} name={name} id={name} className='form-control' />\n\t\t\t{error && <div className='alert alert-danger'>{error}</div>}\n\t\t</div>\n\t);\n};\n\nexport default Input;\n","import React from 'react';\n\nconst Select = ({ name, label, options, error, ...rest }) => {\n\treturn (\n\t\t<div className='form-group'>\n\t\t\t<label htmlFor={name}>{label}</label>\n\t\t\t<select name={name} id={name} {...rest} className='form-control'>\n\t\t\t\t<option value='' />\n\t\t\t\t{options.map((option) => (\n\t\t\t\t\t<option key={option._id} value={option._id}>\n\t\t\t\t\t\t{option.name}\n\t\t\t\t\t</option>\n\t\t\t\t))}\n\t\t\t</select>\n\t\t\t{error && <div className='alert alert-danger'>{error}</div>}\n\t\t</div>\n\t);\n};\n\nexport default Select;\n","import React, { Component } from 'react';\nimport Joi from 'joi-browser';\nimport Input from './input';\nimport Select from './select';\n\nclass Form extends Component {\n\tstate = {\n\t\tdata: {},\n\t\terrors: {},\n\t};\n\n\tvalidate = () => {\n\t\tconst options = { abortEarly: false };\n\t\tconst { error } = Joi.validate(this.state.data, this.schema, options);\n\t\tif (!error) return null;\n\n\t\tconst errors = {};\n\t\tfor (let item of error.details) errors[item.path[0]] = item.message;\n\t\treturn errors;\n\t};\n\n\tvalidateProperty = ({ name, value }) => {\n\t\tconst obj = { [name]: value };\n\t\tconst schema = { [name]: this.schema[name] };\n\t\tconst { error } = Joi.validate(obj, schema);\n\t\treturn error ? error.details[0].message : null;\n\t};\n\n\thandleSubmit = (e) => {\n\t\te.preventDefault();\n\n\t\tconst errors = this.validate();\n\t\tthis.setState({ errors: errors || {} });\n\t\tif (errors) return;\n\n\t\tthis.doSubmit();\n\t};\n\n\thandleChange = ({ currentTarget: input }) => {\n\t\tconst errors = { ...this.state.errors };\n\t\tconst errorMessage = this.validateProperty(input);\n\t\tif (errorMessage) errors[input.name] = errorMessage;\n\t\telse delete errors[input.name];\n\n\t\tconst data = { ...this.state.data };\n\t\tdata[input.name] = input.value;\n\n\t\tthis.setState({ data, errors });\n\t};\n\n\trenderButton(label) {\n\t\treturn (\n\t\t\t<button disabled={this.validate()} className='btn btn-primary'>\n\t\t\t\t{label}\n\t\t\t</button>\n\t\t);\n\t}\n\n\trenderSelect(name, label, options) {\n\t\tconst { data, errors } = this.state;\n\n\t\treturn (\n\t\t\t<Select\n\t\t\t\tname={name}\n\t\t\t\tvalue={data[name]}\n\t\t\t\tlabel={label}\n\t\t\t\toptions={options}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t\terror={errors[name]}\n\t\t\t/>\n\t\t);\n\t}\n\n\trenderInput(name, label, type = 'text') {\n\t\tconst { data, errors } = this.state;\n\n\t\treturn (\n\t\t\t<Input\n\t\t\t\ttype={type}\n\t\t\t\tname={name}\n\t\t\t\tvalue={data[name]}\n\t\t\t\tlabel={label}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t\terror={errors[name]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default Form;\n","// For simplicity, I changed the implementation of this module\n// and removed Raven. We can always add that in the future\n// and this module is the only module we need to modify.\n\nfunction init() {}\n\nfunction log(error) {\n\tconsole.error(error);\n}\n\nexport default {\n\tinit,\n\tlog,\n};\n","import axios from 'axios';\nimport logger from './logService';\nimport { toast } from 'react-toastify';\n\naxios.interceptors.response.use(null, (error) => {\n\tconst expectedError = error.response && error.response.status >= 400 && error.response.status < 500;\n\n\tif (!expectedError) {\n\t\tlogger.log(error);\n\t\ttoast.error('An unexpected error occurrred.');\n\t}\n\n\treturn Promise.reject(error);\n});\n\nexport default {\n\tget: axios.get,\n\tpost: axios.post,\n\tput: axios.put,\n\tdelete: axios.delete,\n};\n","import http from './httpService';\nimport { apiUrl, apiKey } from '../config.json';\n\nconst apiEndPoint = apiUrl + 'nearest_city?key=' + apiKey;\n\nexport function getCity() {\n\treturn http.get(apiEndPoint);\n}\n","import React, { Component } from 'react';\n\nfunction evalAQI(aqi) {\n\tif (aqi >= 0 && aqi <= 50) return { condition: 'Good', color: 'Green' };\n\t// 51 to 100\tModerate\tYellow\n\t// 101 to 150\tUnhealthy for Sensitive Groups\tOrange\n\t// 151 to 200\tUnhealthy\tRed\n\t// 201 to 300\tVery Unhealthy\tPurple\n\t// 301 to 500\tHazardous\tMaroon\n\n\treturn 'hello';\n}\nconst Result = (props) => {\n\tconst { value } = props;\n\tconsole.log(value);\n\tif (value) {\n\t\tconst { city, state, country } = value;\n\t\tconst { aqius } = value.current.pollution;\n\t\tconst quality = evalAQI(aqius);\n\t\treturn (\n\t\t\t<div className='card text-center w-75'>\n\t\t\t\t<div className='card-header'>\n\t\t\t\t\t{city}, {state}, {country}\n\t\t\t\t</div>\n\t\t\t\t<div className='card-body'>\n\t\t\t\t\t<h5 className='card-title'>AQI: {aqius} US AQI</h5>\n\t\t\t\t\t<p className='card-text'>Air Quality: {quality.condition}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\treturn null;\n};\n\nexport default Result;\n","import React from 'react';\nimport Form from './common/form';\nimport Joi from 'joi-browser';\nimport { getCity } from '../service/aqiService';\nimport Result from './result';\nclass LocationForm extends Form {\n\tstate = {\n\t\tdata: { location: '' },\n\t\terrors: {},\n\t};\n\n\tschema = {\n\t\tlocation: Joi.string().required().label('Location'),\n\t};\n\n\tdoSubmit = async () => {\n\t\t// Call the server\n\t\tconst result = await getCity();\n\t\tthis.setState({ result: result.data.data });\n\t\tconsole.log('Submitted', this.state.data.location, this.state.aqius, result.data.data.log);\n\t};\n\trender() {\n\t\tconst { result, location } = this.state;\n\t\tconsole.log(result);\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h1 className='head'>Check Your Air quality</h1>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t{this.renderInput('location', 'Location')}\n\t\t\t\t\t{this.renderButton('Check')}\n\t\t\t\t</form>\n\t\t\t\t<Result value={result} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default LocationForm;\n","import React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport LocationForm from './component/locationForm';\n\nimport './App.css';\nfunction App() {\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div className='container'>\n\t\t\t\t<Route path='/' component={LocationForm} />\n\t\t\t\t{/* <Redirect from='/' to='/check_your_air' /> */}\n\t\t\t</div>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<BrowserRouter>\n\t\t<App />\n\t</BrowserRouter>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}